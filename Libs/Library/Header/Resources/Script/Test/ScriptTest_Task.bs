
private var count:int;

public var message:string;
public var transParam:TranslateParameter;

function main():int
{
	
	if(TriggerKeyBoard(Keys.Space)){
		print(message+ "!:"+ToString(count));
		count+=1;
	}
	
	var velocity:Vector3;
	if(CheckKeyBoard(Keys.D)){
		velocity.x=1.0;
	}
	if(CheckKeyBoard(Keys.A)){
		velocity.x=-1.0;
	}
	if(CheckKeyBoard(Keys.W)){
		velocity.z=1.0;
	}
	if(CheckKeyBoard(Keys.S)){
		velocity.z=-1.0;
	}
	velocity.Normalize();
	velocity=transParam.GetMoveOffset(velocity);

	if(velocity.GetLength()<0.01){
		EventExecute("TranslateStop");
	}

	Translate(velocity);
	return 0;
}


function OnStart():void{
	PushTask("SpeedUp");

}

function SpeedUp():void{
	for(;transParam.speed <1.0;transParam.speed+=0.00001){
		print("SpeedUp! speed:"+ToString(transParam.speed));
	}
}

class TranslateParameter{
	public speed:float; 
	public verticalSpeed:float; 


	GetMoveOffset(velocity:Vector3):Vector3{
		velocity.x*=this.speed;
		velocity.z*=this.speed;
		velocity.y*=this.verticalSpeed;

		return velocity;
	}

}